{"version":3,"file":"main.js","mappings":"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","sources":["webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/app.js"],"sourcesContent":["// Might be SERVER_CODES and CLIENT_CODES if we had more and different constants\r\nexport const SERVER = {\r\n    AUTH_MISSING: 'auth-missing',\r\n    AUTH_INSUFFICIENT: 'auth-insufficient',\r\n    REQUIRED_USERNAME: 'required-username',\r\n    REQUIRED_TASK: 'required-task',\r\n  };\r\n  \r\n  export const CLIENT = {\r\n    NETWORK_ERROR: 'networkError',\r\n    NO_SESSION: 'noSession',\r\n  };\r\n  \r\n  export const MESSAGES = {\r\n    // The [] below uses the variable value as the key\r\n    [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\r\n    // Here we use 'dog' to simulate a bad password\r\n    [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\r\n    [SERVER.REQUIRED_USERNAME]: 'Please enter a valid (letters and/or numbers) username',\r\n    [SERVER.REQUIRED_TASK]: 'Please enter the task to do',\r\n    default: 'Something went wrong.  Please try again',\r\n  };\r\n  ","import {\r\n  fetchAddMessage,\r\n  fetchLogin,\r\n  fetchLogout,\r\n  fetchMessages,\r\n  fetchUsers,\r\n} from \"./services\";\r\nimport state, {\r\n  login,\r\n  logout,\r\n  updateMessages,\r\n  setError,\r\n  updateUsers,\r\n  waitOnUsers,\r\n  waitOnMessages,\r\n} from \"./state\";\r\nimport render from \"./render\";\r\n\r\nconst appEl = document.querySelector(\"#app\");\r\n\r\nfunction checkForMessages() {\r\n  fetchUsers()\r\n    .then((users) => {\r\n      updateUsers(users.users);\r\n      render({ state, appEl });\r\n      waitOnMessages();\r\n      return fetchMessages();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .then((messages) => {\r\n      const { messagesList } = messages;\r\n      updateMessages(messagesList);\r\n      render({ state, appEl });\r\n      const scrollDiv = document.querySelector(\".messages\");\r\n      scrollDiv.scrollTop = scrollDiv.scrollHeight;\r\n      const inputEl = document.querySelector(\".to-send\");\r\n      inputEl.focus();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\nexport function addAbilityToLogin({ state, appEl }) {\r\n  appEl.addEventListener(\"submit\", (e) => {\r\n    e.preventDefault();\r\n    if (!e.target.classList.contains(\"login-form\")) {\r\n      return;\r\n    }\r\n    const username = document.querySelector(\".username\").value;\r\n    fetchLogin(username)\r\n      .then((res) => {\r\n        login(username);\r\n        render({ state, appEl });\r\n        waitOnUsers();\r\n        render({ state, appEl });\r\n        return fetchUsers();\r\n      })\r\n      .catch((err) => {\r\n        setError(err?.error || \"ERROR\");\r\n        render({ state, appEl });\r\n      })\r\n      .then((users) => {\r\n        updateUsers(users.users);\r\n        render({ state, appEl });\r\n        waitOnMessages();\r\n        render({ state, appEl });\r\n        return fetchMessages();\r\n      })\r\n      .catch((err) => {\r\n        setError(err?.error || \"ERROR\");\r\n        logout();\r\n      })\r\n      .then((messages) => {\r\n        const { messagesList } = messages;\r\n        updateMessages(messagesList);\r\n        render({ state, appEl });\r\n        const inputEl = document.querySelector(\".to-send\");\r\n        inputEl.focus();\r\n        const scrollDiv = document.querySelector(\".messages\");\r\n        scrollDiv.scrollTop = scrollDiv.scrollHeight;\r\n        setInterval(checkForMessages, 5000);\r\n      })\r\n      .catch((err) => {\r\n        setError(err?.error || \"ERROR\");\r\n        logout();\r\n      });\r\n  });\r\n}\r\n\r\nexport function addAbilityToLogout({ state, appEl }) {\r\n  appEl.addEventListener(\"click\", (e) => {\r\n    if (!e.target.classList.contains(\"logout-btn\")) {\r\n      return;\r\n    }\r\n    logout();\r\n    render({ state, appEl });\r\n    fetchLogout().catch((err) => {\r\n      setError(err?.error || \"ERROR\");\r\n      render({ state, appEl });\r\n    });\r\n  });\r\n}\r\n\r\nexport function addAbilityToAddMessage({ state, appEl }) {\r\n  appEl.addEventListener(\"click\", (e) => {\r\n    if (!e.target.classList.contains(\"send-btn\")) {\r\n      return;\r\n    }\r\n    const message = document.querySelector(\".to-send\").value;\r\n    if (message) {\r\n      fetchAddMessage(state.username, message)\r\n        .then((message) => {\r\n          render({ state, appEl });\r\n          return fetchMessages();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          setError(err?.error || \"ERROR\");\r\n          render({ state, appEl });\r\n        })\r\n        .then((messages) => {\r\n          const { messagesList } = messages;\r\n          updateMessages(messagesList);\r\n          render({ state, appEl });\r\n          const scrollDiv = document.querySelector(\".messages\");\r\n          scrollDiv.scrollTop = scrollDiv.scrollHeight;\r\n          const inputEl = document.querySelector(\".to-send\");\r\n          inputEl.focus();\r\n        })\r\n        .catch((err) => {\r\n          logout();\r\n          setError(err?.error || \"ERROR\");\r\n          render({ state, appEl });\r\n        });\r\n    }\r\n  });\r\n}\r\n","const render = ({ state, appEl }) => {\r\n  const html = `\r\n        <main>\r\n            ${generateLoaderHtml(state)}\r\n            ${generateLoginHtml(state)}\r\n            ${generateNavHtml(state)}\r\n            <div class=\"messages-container\">\r\n              ${generateUsers(state)}\r\n              ${generateMessages(state)}\r\n              ${generateOutgoing(state)}\r\n            </div>\r\n        </main>\r\n    `;\r\n  appEl.innerHTML = html;\r\n\r\n  function generateStatusHtml(state) {\r\n    return `\r\n        <div class=\"status\">${state.error}</div>\r\n    `;\r\n  }\r\n\r\n  function generateLoaderHtml(state) {\r\n    if (state.isMessagePending || state.isUsersPending || state.isLoginPending) {\r\n      return `\r\n      div class=\"login__waiting\">Loading user...</div>\r\n    `;\r\n    } else {\r\n      return ``;\r\n    }\r\n  }\r\n\r\n  function generateLoginHtml(state) {\r\n    if (state.isLoggedIn) {\r\n      return ``;\r\n    }\r\n    return `\r\n      <div class=\"login\">\r\n          <h1 class=\"login-title\">Login Here!</h2>\r\n          <form class=\"login-form\" method=\"POST\">\r\n              <div class=\"input-field\">\r\n                <input type=\"text\" class=\"username\" name=\"username\" placeholder=\" Type your username here!\" />\r\n              </div>\r\n              <button type=\"submit\" class=\"login-btn\">Login</button>\r\n          </form>\r\n          ${generateStatusHtml(state)}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  function generateNavHtml(state) {\r\n    if (state.isLoggedIn && !state.isMessagePending && !state.isUsersPending) {\r\n      return `\r\n      <nav class=\"user-navbar\">\r\n      <ul>\r\n        <li>\r\n          <div class=\"user-details\">\r\n            <span class=\"user-avatar\">${state.username\r\n              .charAt(0)\r\n              .toUpperCase()}</span>\r\n            <span class=\"user-name\">${\r\n              state.username.charAt(0).toUpperCase() + state.username.slice(1)\r\n            }</span>\r\n          </div>\r\n        </li>\r\n        <li>\r\n          <form method=\"POST\" action=\"./logout\">\r\n            <button class=\"logout-btn\" type=\"submit\">Logout</button>\r\n          </form>\r\n        </li>\r\n      </ul>\r\n    </nav>`;\r\n    } else {\r\n      return ``;\r\n    }\r\n  }\r\n\r\n  function generateMessages(state) {\r\n    if (state.isLoggedIn && !state.isMessagePending && !state.isUsersPending) {\r\n      if (Object.values(state.messages).length > 0) {\r\n        return (\r\n          `\r\n              <ol class=\"messages\">` +\r\n          Object.values(state.messages)\r\n            .map(\r\n              (message) => `\r\n              <li>\r\n                <div class=\"message\">\r\n                  <span class=\"sender-avatar\">${message.username.charAt(\r\n                    0\r\n                  )}</span>\r\n                  <div class=\"message-content\">\r\n                    <p class=\"message-sender\">${message.username}</p>\r\n                    <p class=\"message-text\">${message.message}</p>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n              `\r\n            )\r\n            .join(\"\") +\r\n          `</ol>\r\n            `\r\n        );\r\n      } else {\r\n        return `\r\n          <div class=\"no-messages\"><h2>No Messages Here</h2></div>\r\n        `;\r\n      }\r\n    } else {\r\n      return ``;\r\n    }\r\n  }\r\n\r\n  function generateOutgoing(state) {\r\n    if (state.isLoggedIn ) {\r\n      return `\r\n        <div class=\"send-bottom\">\r\n            <form class=\"chat-send-form\">\r\n              <input type=\"text\" class=\"to-send\" name=\"message\" placeholder=\"Type your message\"/>\r\n              <button type=\"submit\" class=\"send-btn\">Send</button>\r\n            </form>\r\n        </div>\r\n        `;\r\n    } else {\r\n      return ``;\r\n    }\r\n  }\r\n\r\n  function generateUsers(state) {\r\n    if (state.isLoggedIn && !state.isUsersPending) {\r\n      return (\r\n        `<div class=\"users-list\">\r\n          <h3>All Users:</h3>\r\n          <ul class=\"users\">` +\r\n          Object.values(state.users)\r\n          .map(\r\n            (user) => `\r\n                  <li>\r\n                    <div class=\"user ${user.online ? \"active\" : \"\"}\">\r\n                      <span class=\"sender\">${user.username}</span>\r\n                    </div>\r\n                  </li>\r\n                `\r\n          )\r\n          .join(\"\") +\r\n        `</ul>\r\n        </div>`\r\n      );\r\n    } else {\r\n      return ``;\r\n    }\r\n  }\r\n};\r\n\r\nexport default render;\r\n","export function fetchAddMessage(username, message) {\r\n  return fetch(\"/api/messages\", {\r\n    method: \"POST\",\r\n    headers: new Headers({\r\n      \"content-type\": \"application/json\",\r\n    }),\r\n    body: JSON.stringify({ username, message }),\r\n  })\r\n  .catch(() => Promise.reject({ error: \"networkError\" }))\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return response.json()\r\n      .catch((error) => Promise.reject({ error }))\r\n      .then((err) => Promise.reject(err));\r\n  });\r\n}\r\n\r\nexport function fetchMessages() {\r\n  return fetch(\"/api/messages\", {\r\n    method: \"GET\",\r\n  })\r\n  .catch(() => Promise.reject({ error: \"networkError\" }))\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return response.json()\r\n    .catch((error) => Promise.reject({ error }))\r\n    .then((err) => Promise.reject(err));\r\n  });\r\n}\r\n\r\nexport function fetchSession() {\r\n  return fetch(\"/api/session\", {\r\n    method: \"GET\",\r\n  })\r\n  .catch(() => Promise.reject({ error: \"networkError\" }))\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return response.json()\r\n    .catch((error) => Promise.reject({ error }))\r\n    .then((err) => Promise.reject(err));\r\n  });\r\n}\r\n\r\nexport function fetchUsers() {\r\n  return fetch(\"/api/users\", {\r\n    method: \"GET\",\r\n  })\r\n  .catch(() => Promise.reject({ error: \"networkError\" }))\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return response.json()\r\n    .catch((error) => Promise.reject({ error }))\r\n    .then((err) => Promise.reject(err));\r\n  });\r\n}\r\n\r\nexport function fetchLogout() {\r\n  return fetch(\"/api/session\", {\r\n    method: \"DELETE\",\r\n  })\r\n  .catch(() => Promise.reject({ error: \"networkError\" }))\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return response.json()\r\n    .catch((error) => Promise.reject({ error }))\r\n    .then((err) => Promise.reject(err));\r\n  });\r\n}\r\n\r\nexport function fetchLogin(username) {\r\n  return fetch(\"/api/session\", {\r\n    method: \"POST\",\r\n    headers: new Headers({\r\n      \"content-type\": \"application/json\",\r\n    }),\r\n    body: JSON.stringify({ username }),\r\n  })\r\n  .catch(() => Promise.reject({ error: \"networkError\" }))\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return response.json()\r\n    .catch((error) => Promise.reject({ error }))\r\n    .then((err) => Promise.reject(err));\r\n  });\r\n}","import { MESSAGES } from './constants';\r\n\r\nconst state = {\r\n  // We store these as an object because we will access by id\r\n  messages: {},\r\n  users:{},\r\n  isLoggedIn: false,\r\n  isLoginPending: true,\r\n  isMessagePending: false,\r\n  isUserPending: false,\r\n  username: '',\r\n  error: '',\r\n};\r\n\r\nexport function waitOnLogin() {\r\n  state.isLoggedIn = false;\r\n  state.isLoginPending = true;\r\n  state.username = '';\r\n  state.messages = {};\r\n  state.error = '';\r\n}\r\n\r\nexport function login(username) {\r\n  state.isLoggedIn = true;\r\n  state.isLoginPending = false;\r\n  state.username = username;\r\n  state.error = '';\r\n}\r\n\r\nexport function logout() {\r\n  state.isLoggedIn = false;\r\n  state.isLoginPending = false;\r\n  state.username = '';\r\n  state.messages = {};\r\n  state.error = '';\r\n}\r\n\r\nexport function waitOnMessages() {\r\n  state.messages = {};\r\n  state.isMessagePending = true;\r\n  state.error = '';\r\n}\r\n\r\nexport function updateMessages(messages) {\r\n  state.messages = messages;\r\n  state.isMessagePending = false;\r\n  state.error = '';\r\n}\r\n\r\nexport function waitOnUsers() {\r\n    state.users = {};\r\n    state.isUsersPending = true;\r\n    state.error = '';\r\n  }\r\n\r\nexport function updateUsers(users) {\r\n  state.users = users;\r\n  state.isUsersPending = false;\r\n  state.error = '';\r\n}\r\n\r\nexport function setMessage(){\r\n    state.isLoggedIn = true;\r\n    state.error = '';\r\n}\r\n\r\nexport function setError(error) {\r\n  console.log(error);\r\n  if(!error) {\r\n    state.error = '';\r\n    return;\r\n  }\r\n  state.error = MESSAGES[error] || MESSAGES.default;\r\n}\r\n\r\nexport default state;\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { SERVER, CLIENT } from \"./constants\";\r\nimport state, {\r\n  login,\r\n  logout,\r\n  updateMessages,\r\n  updateUsers,\r\n  waitOnMessages,\r\n  waitOnUsers,\r\n} from \"./state\";\r\nimport { \r\n  fetchMessages, \r\n  fetchSession, \r\n  fetchUsers } from \"./services\";\r\nimport render from \"./render\";\r\nimport {\r\n  addAbilityToAddMessage,\r\n  addAbilityToLogin,\r\n  addAbilityToLogout,\r\n} from \"./listeners\";\r\n\r\n\r\n// Main code\r\nconst appEl = document.querySelector(\"#app\");\r\nrender({ state, appEl });\r\naddAbilityToLogin({ state, appEl });\r\naddAbilityToLogout({ state, appEl });\r\naddAbilityToAddMessage({ state, appEl });\r\ncheckForSession();\r\n\r\n/////////////////////\r\nfunction checkForMessages() {\r\n  fetchUsers()\r\n    .then((users) => {\r\n      updateUsers(users.users);\r\n      render({ state, appEl });\r\n      return fetchMessages();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .then((messages) => {\r\n      const { messagesList } = messages;\r\n      updateMessages(messagesList);\r\n      render({ state, appEl });\r\n      const scrollDiv = document.querySelector(\".messages\");\r\n      scrollDiv.scrollTop = scrollDiv.scrollHeight;\r\n      const inputEl = document.querySelector(\".to-send\");\r\n      inputEl.focus();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\nfunction checkForSession() {\r\n  fetchSession()\r\n    .then((session) => {\r\n      login(session.userData.username);\r\n      render({ state, appEl });\r\n      waitOnUsers();\r\n      render({ state, appEl });\r\n      return fetchUsers();\r\n    })\r\n    .catch((err) => {\r\n      if (err?.error === SERVER.AUTH_MISSING) {\r\n        return Promise.reject({ error: CLIENT.NO_SESSION });\r\n      }\r\n      return Promise.reject(err);\r\n    })\r\n    .then((users) => {\r\n      updateUsers(users.users);\r\n      render({ state, appEl });\r\n      waitOnMessages();\r\n      render({ state, appEl });\r\n      return fetchMessages();\r\n    })\r\n    .catch((err) => {\r\n      logout();\r\n      render({ state, appEl });\r\n    })\r\n    .then((messages) => {\r\n      const { messagesList } = messages;\r\n      updateMessages(messagesList);\r\n      render({ state, appEl });\r\n      const scrollDiv = document.querySelector(\".messages\");\r\n      scrollDiv.scrollTop = scrollDiv.scrollHeight;\r\n      const inputEl = document.querySelector(\".to-send\");\r\n      inputEl.focus();\r\n      setInterval(checkForMessages, 5000);\r\n    })\r\n    .catch((err) => {\r\n      if (err?.error == CLIENT.NO_SESSION) {\r\n        logout();\r\n        render({ state, appEl });\r\n        return;\r\n      }\r\n    });\r\n}\r\n"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_TASK","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_defineProperty","fetchAddMessage","fetchLogin","fetchLogout","fetchMessages","fetchUsers","state","login","logout","updateMessages","setError","updateUsers","waitOnUsers","waitOnMessages","render","appEl","document","querySelector","checkForMessages","then","users","err","console","log","messages","messagesList","scrollDiv","scrollTop","scrollHeight","inputEl","focus","addAbilityToLogin","_ref","addEventListener","e","preventDefault","target","classList","contains","username","value","res","error","setInterval","addAbilityToLogout","_ref2","addAbilityToAddMessage","_ref3","message","html","concat","generateLoaderHtml","generateLoginHtml","generateNavHtml","generateUsers","generateMessages","generateOutgoing","innerHTML","generateStatusHtml","isMessagePending","isUsersPending","isLoginPending","isLoggedIn","charAt","toUpperCase","slice","Object","values","length","map","join","user","online","fetch","method","headers","Headers","body","JSON","stringify","Promise","reject","response","ok","json","fetchSession","isUserPending","waitOnLogin","setMessage","checkForSession","session","userData"],"sourceRoot":""}